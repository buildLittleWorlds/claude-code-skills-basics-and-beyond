---
name: docs-generator
description: Generates or updates API documentation from source code. Use when the user says "generate docs", "update documentation", "document this API", or "create API reference". Scans source code for functions, classes, and endpoints.
user-invocable: true
argument-hint: "[file-or-directory]"
---

# Documentation Generator

Generate or update API documentation from source code.

## Step 1: Determine scope

Decide what to document:

- If `$ARGUMENTS` is a file path: document that single file
- If `$ARGUMENTS` is a directory: document all source files in that directory
- If no arguments: scan the project for documentable code:
  - `src/` or `lib/` directory
  - Route/endpoint files (files containing route definitions)
  - Exported modules and public APIs

## Step 2: Scan for documentable elements

For each source file, extract:

### Functions and Methods
- Function name, parameters (with types if available), return type
- JSDoc/docstring if present
- Whether it's exported/public

### Classes and Types
- Class name, constructor parameters
- Public methods and properties
- Interfaces and type definitions

### API Endpoints (if applicable)
- HTTP method and path
- Request parameters (path, query, body)
- Response format
- Authentication requirements
- Status codes

### Configuration
- Environment variables used
- Configuration file schemas
- Default values

## Step 3: Generate documentation

Write documentation in Markdown format. Structure depends on the project type:

### For libraries/modules:

```markdown
# API Reference

## Module: [name]

### `functionName(param1: Type, param2: Type): ReturnType`

Description from docstring or inferred from code.

**Parameters:**
- `param1` (Type) -- Description
- `param2` (Type, optional) -- Description. Default: `value`

**Returns:** ReturnType -- Description

**Example:**
```language
const result = functionName('arg1', 'arg2');
```
```

### For REST APIs:

```markdown
# API Reference

## Endpoints

### `POST /api/resource`

Description of what this endpoint does.

**Authentication:** Required / None

**Request Body:**
| Field | Type | Required | Description |
|-------|------|----------|-------------|
| name  | string | yes | Resource name |

**Response:** `200 OK`
```json
{ "id": 1, "name": "example" }
```

**Errors:**
- `400` -- Invalid request body
- `401` -- Authentication required
- `404` -- Resource not found
```

## Step 4: Write the documentation

- If `docs/` directory exists, write to `docs/API.md`
- If a `docs/` directory doesn't exist, write to `API.md` in the project root
- If updating existing documentation, preserve manually-written sections (marked with `<!-- manual -->` comments) and only update auto-generated sections

Add a header noting the file is partially auto-generated:

```markdown
<!-- Generated by docs-generator. Manual edits outside of marked sections will be overwritten. -->
```

## Step 5: Summarize

Report:
- Number of functions/endpoints documented
- Files scanned
- Output location
- Any elements that couldn't be fully documented (missing type information, unclear behavior)
- Suggestion: "Review the generated docs and add descriptions where the auto-generated ones are insufficient."

## Error handling

- If the target file/directory doesn't exist: "Path '$ARGUMENTS' not found."
- If no documentable code is found: "No public functions, classes, or endpoints found in [scope]. Make sure your code exports public APIs."
- If the project has no source code: "No source files found. This skill works with JavaScript/TypeScript, Python, Go, and Rust projects."
